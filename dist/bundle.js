!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Pokerground=t():e.Pokerground=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var i=n(7);i.trust=n(8),i.fragment=n(9),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i,l,s){return{tag:e,key:t,attrs:n,children:i,text:l,dom:s,domSize:void 0,state:void 0,events:void 0,instance:void 0}}i.normalize=function(e){return Array.isArray(e)?i("[",void 0,void 0,i.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:i("#",void 0,void 0,String(e),void 0,void 0)},i.normalizeChildren=function(e){var t=[];if(e.length){for(var n=null!=e[0]&&null!=e[0].key,l=1;l<e.length;l++)if((null!=e[l]&&null!=e[l].key)!==n)throw new TypeError("Vnodes must either always have keys or never have keys!");for(l=0;l<e.length;l++)t[l]=i.normalize(e[l])}return t},e.exports=i},function(e,t,n){"use strict";var i=n(1);e.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return i("",t.key,t,e)}},function(e,t,n){"use strict";e.exports=n(6)(window)},function(e,t,n){e.exports=n(5)},function(e,t,n){const i=n(10);e.exports=i.app},function(e,t,n){"use strict";var i=n(1);e.exports=function(e){var t,n=e&&e.document,l={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function s(e){return e.attrs&&e.attrs.xmlns||l[e.tag]}function a(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function o(e){var t=e.state;try{return this.apply(t,arguments)}finally{a(e,t)}}function r(){try{return n.activeElement}catch(e){return null}}function u(e,t,n,i,l,s,a){for(var o=n;o<i;o++){var r=t[o];null!=r&&c(e,r,l,a,s)}}function c(e,t,l,a,r){var d=t.tag;if("string"==typeof d)switch(t.state={},null!=t.attrs&&z(t.attrs,t,l),d){case"#":!function(e,t,i){t.dom=n.createTextNode(t.children),w(e,t.dom,i)}(e,t,r);break;case"<":h(e,t,a,r);break;case"[":!function(e,t,i,l,s){var a=n.createDocumentFragment();if(null!=t.children){var o=t.children;u(a,o,0,o.length,i,null,l)}t.dom=a.firstChild,t.domSize=a.childNodes.length,w(e,a,s)}(e,t,l,a,r);break;default:!function(e,t,l,a,o){var r=t.tag,c=t.attrs,d=c&&c.is,h=(a=s(t)||a)?d?n.createElementNS(a,r,{is:d}):n.createElementNS(a,r):d?n.createElement(r,{is:d}):n.createElement(r);t.dom=h,null!=c&&function(e,t,n){for(var i in t)S(e,i,null,t[i],n)}(t,c,a);if(w(e,h,o),!k(t)&&(null!=t.text&&(""!==t.text?h.textContent=t.text:t.children=[i("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children)){var f=t.children;u(h,f,0,f.length,l,null,a),"select"===t.tag&&null!=c&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&S(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,c)}}(e,t,l,a,r)}else!function(e,t,n,l,s){(function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(z(e.state,e,t),null!=e.attrs&&z(e.attrs,e,t),e.instance=i.normalize(o.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(t,n),null!=t.instance?(c(e,t.instance,n,l,s),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,l,a,r)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function h(e,t,i,l){var s=t.children.match(/^\s*?<(\w+)/im)||[],a=n.createElement(d[s[1]]||"div");"http://www.w3.org/2000/svg"===i?(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",a=a.firstChild):a.innerHTML=t.children,t.dom=a.firstChild,t.domSize=a.childNodes.length,t.instance=[];for(var o,r=n.createDocumentFragment();o=a.firstChild;)t.instance.push(o),r.appendChild(o);w(e,r,l)}function f(e,t,n,i,l,s){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)u(e,n,0,n.length,i,l,s);else if(null==n||0===n.length)y(e,t,0,t.length);else{var a=null!=t[0]&&null!=t[0].key,o=null!=n[0]&&null!=n[0].key,r=0,d=0;if(!a)for(;d<t.length&&null==t[d];)d++;if(!o)for(;r<n.length&&null==n[r];)r++;if(null===o&&null==a)return;if(a!==o)y(e,t,d,t.length),u(e,n,r,n.length,i,l,s);else if(o){for(var h,f,w,k,A,I=t.length-1,C=n.length-1;I>=d&&C>=r&&(w=t[I],k=n[C],w.key===k.key);)w!==k&&v(e,w,k,i,l,s),null!=k.dom&&(l=k.dom),I--,C--;for(;I>=d&&C>=r&&(h=t[d],f=n[r],h.key===f.key);)d++,r++,h!==f&&v(e,h,f,i,g(t,d,l),s);for(;I>=d&&C>=r&&r!==C&&h.key===k.key&&w.key===f.key;)b(e,w,A=g(t,d,l)),w!==f&&v(e,w,f,i,A,s),++r<=--C&&b(e,h,l),h!==k&&v(e,h,k,i,l,s),null!=k.dom&&(l=k.dom),d++,w=t[--I],k=n[C],h=t[d],f=n[r];for(;I>=d&&C>=r&&w.key===k.key;)w!==k&&v(e,w,k,i,l,s),null!=k.dom&&(l=k.dom),C--,w=t[--I],k=n[C];if(r>C)y(e,t,d,I+1);else if(d>I)u(e,n,r,C+1,i,l,s);else{var S,R,M=l,P=C-r+1,$=new Array(P),H=0,j=0,E=2147483647,T=0;for(j=0;j<P;j++)$[j]=-1;for(j=C;j>=r;j--){null==S&&(S=p(t,d,I+1));var N=S[(k=n[j]).key];null!=N&&(E=N<E?N:-1,$[j-r]=N,w=t[N],t[N]=null,w!==k&&v(e,w,k,i,l,s),null!=k.dom&&(l=k.dom),T++)}if(l=M,T!==I-d+1&&y(e,t,d,I+1),0===T)u(e,n,r,C+1,i,l,s);else if(-1===E)for(H=(R=function(e){for(var t=[0],n=0,i=0,l=0,s=m.length=e.length,l=0;l<s;l++)m[l]=e[l];for(var l=0;l<s;++l)if(-1!==e[l]){var a=t[t.length-1];if(e[a]<e[l])m[l]=a,t.push(l);else{for(n=0,i=t.length-1;n<i;){var o=(n>>>1)+(i>>>1)+(n&i&1);e[t[o]]<e[l]?n=o+1:i=o}e[l]<e[t[n]]&&(n>0&&(m[l]=t[n-1]),t[n]=l)}}n=t.length,i=t[n-1];for(;n-- >0;)t[n]=i,i=m[i];return m.length=0,t}($)).length-1,j=C;j>=r;j--)f=n[j],-1===$[j-r]?c(e,f,i,s,l):R[H]===j-r?H--:b(e,f,l),null!=f.dom&&(l=n[j].dom);else for(j=C;j>=r;j--)f=n[j],-1===$[j-r]&&c(e,f,i,s,l),null!=f.dom&&(l=n[j].dom)}}else{var z=t.length<n.length?t.length:n.length;for(r=r<d?r:d;r<z;r++)(h=t[r])===(f=n[r])||null==h&&null==f||(null==h?c(e,f,i,s,g(t,r+1,l)):null==f?x(e,h):v(e,h,f,i,g(t,r+1,l),s));t.length>z&&y(e,t,r,t.length),n.length>z&&u(e,n,r,n.length,i,l,s)}}}function v(e,t,n,l,a,r){var u=t.tag;if(u===n.tag){if(n.state=t.state,n.events=t.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=o.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=o.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,t))return;if("string"==typeof u)switch(null!=n.attrs&&O(n.attrs,n,l),u){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,n);break;case"<":!function(e,t,n,i,l){t.children!==n.children?(A(e,t),h(e,n,i,l)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}(e,t,n,r,a);break;case"[":!function(e,t,n,i,l,s){f(e,t.children,n.children,i,l,s);var a=0,o=n.children;if(n.dom=null,null!=o){for(var r=0;r<o.length;r++){var u=o[r];null!=u&&null!=u.dom&&(null==n.dom&&(n.dom=u.dom),a+=u.domSize||1)}1!==a&&(n.domSize=a)}}(e,t,n,l,a,r);break;default:!function(e,t,n,l){var a=t.dom=e.dom;l=s(t)||l,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0));(function(e,t,n,i){if(null!=n)for(var l in n)S(e,l,t&&t[l],n[l],i);var s;if(null!=t)for(var l in t)null==(s=t[l])||null!=n&&null!=n[l]||R(e,l,s,i)})(t,e.attrs,t.attrs,l),k(t)||(null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[i("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[i("#",void 0,void 0,t.text,void 0,void 0)]),f(a,e.children,t.children,n,null,l)))}(t,n,l,r)}else!function(e,t,n,l,s,a){if(n.instance=i.normalize(o.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");O(n.state,n,l),null!=n.attrs&&O(n.attrs,n,l);null!=n.instance?(null==t.instance?c(e,n.instance,l,a,s):v(e,t.instance,n.instance,l,s,a),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(x(e,t.instance),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,l,a,r)}else x(e,t),c(e,n,l,r,a)}function p(e,t,n){for(var i=Object.create(null);t<n;t++){var l=e[t];if(null!=l){var s=l.key;null!=s&&(i[s]=t)}}return i}var m=[];function g(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function b(e,t,i){var l=n.createDocumentFragment();!function e(t,n,i){for(;null!=i.dom&&i.dom.parentNode===t;){if("string"!=typeof i.tag){if(null!=(i=i.instance))continue}else if("<"===i.tag)for(var l=0;l<i.instance.length;l++)n.appendChild(i.instance[l]);else if("["!==i.tag)n.appendChild(i.dom);else if(1===i.children.length){if(null!=(i=i.children[0]))continue}else for(var l=0;l<i.children.length;l++){var s=i.children[l];null!=s&&e(t,n,s)}break}}(e,l,t),w(e,l,i)}function w(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function k(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function y(e,t,n,i){for(var l=n;l<i;l++){var s=t[l];null!=s&&x(e,s)}}function x(e,t){var n,i,l,s=0,r=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(l=o.call(t.state.onbeforeremove,t))&&"function"==typeof l.then&&(s=1,n=l));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(l=o.call(t.attrs.onbeforeremove,t))&&"function"==typeof l.then&&(s|=2,i=l));if(a(t,r),s){if(null!=n){var u=function(){1&s&&((s&=2)||c())};n.then(u,u)}if(null!=i){u=function(){2&s&&((s&=1)||c())};i.then(u,u)}}else C(t),I(e,t);function c(){a(t,r),C(t),I(e,t)}}function A(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function I(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)A(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var i=t.children[n];null!=i&&I(e,i)}}break}}function C(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&o.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&o.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&C(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=t[n];null!=i&&C(i)}}}function S(e,t,i,l,s){if("key"!==t&&"is"!==t&&null!=l&&!M(t)&&(i!==l||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===r()||"option"===e.tag&&e.dom.parentNode===n.activeElement}(e,t)||"object"==typeof l)){if("o"===t[0]&&"n"===t[1])return N(e,t,l);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),l);else if("style"===t)E(e.dom,i,l);else if(P(e,t,s)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+l&&e.dom===r())return;if("select"===e.tag&&null!==i&&e.dom.value===""+l)return;if("option"===e.tag&&null!==i&&e.dom.value===""+l)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,l):e.dom[t]=l}else"boolean"==typeof l?l?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,l)}}function R(e,t,n,i){if("key"!==t&&"is"!==t&&null!=n&&!M(t))if("o"!==t[0]||"n"!==t[1]||M(t))if("style"===t)E(e.dom,n,null);else if(!P(e,t,i)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===r())||"input"===e.tag&&"type"===t){var l=t.indexOf(":");-1!==l&&(t=t.slice(l+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else N(e,t,void 0)}function M(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function P(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var $=/[A-Z]/g;function H(e){return"-"+e.toLowerCase()}function j(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace($,H)}function E(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)for(var i in e.style.cssText="",n){null!=(l=n[i])&&e.style.setProperty(j(i),String(l))}else{for(var i in n){var l;null!=(l=n[i])&&(l=String(l))!==String(t[i])&&e.style.setProperty(j(i),l)}for(var i in t)null!=t[i]&&null==n[i]&&e.style.removeProperty(j(i))}}function T(){this._=t}function N(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new T,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function z(e,t,n){"function"==typeof e.oninit&&o.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(o.bind(e.oncreate,t))}function O(e,t,n){"function"==typeof e.onupdate&&n.push(o.bind(e.onupdate,t))}return T.prototype=Object.create(null),T.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,n,l){if(!e)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var s=[],a=r(),o=e.namespaceURI;null==e.vnodes&&(e.textContent=""),n=i.normalizeChildren(Array.isArray(n)?n:[n]);var u=t;try{t="function"==typeof l?l:void 0,f(e,e.vnodes,n,s,null,"http://www.w3.org/1999/xhtml"===o?void 0:o)}finally{t=u}e.vnodes=n,null!=a&&r()!==a&&"function"==typeof a.focus&&a.focus();for(var c=0;c<s.length;c++)s[c]()}}},function(e,t,n){"use strict";var i=n(1),l=n(2),s=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,a={},o={}.hasOwnProperty;function r(e){for(var t in e)if(o.call(e,t))return!1;return!0}e.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=l.apply(1,arguments);return"string"==typeof e&&(t.children=i.normalizeChildren(t.children),"["!==e)?function(e,t){var n=t.attrs,l=i.normalizeChildren(t.children),s=o.call(n,"class"),a=s?n.class:n.className;if(t.tag=e.tag,t.attrs=null,t.children=void 0,!r(e.attrs)&&!r(n)){var u={};for(var c in n)o.call(n,c)&&(u[c]=n[c]);n=u}for(var c in e.attrs)o.call(e.attrs,c)&&"className"!==c&&!o.call(n,c)&&(n[c]=e.attrs[c]);for(var c in null==a&&null==e.attrs.className||(n.className=null!=a?null!=e.attrs.className?String(e.attrs.className)+" "+String(a):a:null!=e.attrs.className?e.attrs.className:null),s&&(n.class=null),n)if(o.call(n,c)&&"key"!==c){t.attrs=n;break}return Array.isArray(l)&&1===l.length&&null!=l[0]&&"#"===l[0].tag?t.text=l[0].children:t.children=l,t}(a[e]||function(e){for(var t,n="div",i=[],l={};t=s.exec(e);){var o=t[1],r=t[2];if(""===o&&""!==r)n=r;else if("#"===o)l.id=r;else if("."===o)i.push(r);else if("["===t[3][0]){var u=t[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?i.push(u):l[t[4]]=""===u?u:u||!0}}return i.length>0&&(l.className=i.join(" ")),a[e]={tag:n,attrs:l}}(e),t):(t.tag=e,t)}},function(e,t,n){"use strict";var i=n(1);e.exports=function(e){return null==e&&(e=""),i("<",void 0,void 0,e,void 0,void 0)}},function(e,t,n){"use strict";var i=n(1),l=n(2);e.exports=function(){var e=l.apply(0,arguments);return e.tag="[",e.children=i.normalizeChildren(e.children),e}},function(e,t,n){"use strict";n.r(t);const i=void 0!==window.performance?window.performance:Date,l=()=>i.now(),s=window.requestAnimationFrame;function a(e,t=60){let n=!1,i=l(),a=0,o=1e3/t,r=0;this.start=()=>n?this:(n=!0,i=l(),a=s(u),this),this.stop=()=>(n=!1,0!=a&&s.cancel(a),a=0,this);const u=()=>{a=s(u);const t=l(),n=t-i;(r+=n)>=o&&(e(n),r=0),i=t}}var o=n(3),r=n.n(o);n(1);function u(e){let t;this.bounds=()=>t,this.render=t=>{r()(e,t)},(e=>{let n=e.clientWidth,i=e.clientHeight;t={width:n,height:i,ratio:n/i}})(e)}var c=n(0);const d={d:"diamonds",h:"hearts",c:"clubs",s:"spades"},h={A:"ace",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",T:"ten",J:"jack",Q:"queen",K:"king"};function f(e){return{rank:h[e[0]],suit:d[e[1]],hash:e[0]+e[1]}}function v(e,t){return e.hash===t.hash}function p(e){return e.split(" ").map(f)}function m(e){var t={};return e.flop&&(t.flop=p(e.flop)),e.turn&&(t.turn=f(e.turn)),e.river&&(t.river=f(e.river)),t}function g(e){return e.events.move}function b(e,t){return e.seatIndexes[t]}function w(e,t){return e.seatIndexes?e.seatIndexes.indexOf(t):-1}function k(e){let t=e.split("!"),n=t[0],i=t[1];return{...A(n),pots:y(i)}}function y(e){return{running:I(e.split("~")[0]),sides:e.split("~").slice(1).map(I)}}function x(e){return e.split("~").map(I)}function A(e){let[t,n,i,l,s,a]=e.split(" ");return{blinds:parseInt(t),round:M[n],button:parseInt(i),toAct:parseInt(l),allowRaiseUntil:parseInt(s),lastFullRaise:parseInt(a)}}function I(e){let t=e.split(" "),n=t[0],i=t.slice(1);return{wager:parseInt(n),involved:i.map(e=>parseInt(e))}}function C(e,t){let[n,i,l,s]=e.split(" ");return{stackIndex:t,role:R[n],stack:parseInt(i),wager:parseInt(l),lastAction:H(s,parseInt(l))}}const S={TR:"thirdraise",HR:"halfraise",PR:"potraise",RR:"raise",CA:"call",CH:"check",FO:"fold",AA:"allin",AC:"allincall",AH:"allinhalf",AF:"allinfull"},R={I:"involved",F:"folded",O:"oldallin",N:"newallin"},M={P:"preflop",F:"flop",T:"turn",R:"river"},P=/(TR|HR|PR|RR|CA|CH|FO|AA|AC|AH|AF)(\d*)/;function $(e){let t=e.match(P);return t?{hash:t[1],action:S[t[1]],to:t[2]}:null}function H(e,t){return(e=e.match(P))?{hash:e[1],action:S[e[1]],to:t}:null}function j(e,t){return{action:e,to:t}}const E={WN:"waitForNextHand",WO:"waitForOtherPlayers",I:"involved"};function T(e,t){let n,i,l,s,a;((e,t)=>{l=e?function(e){let t=e.split("\n").map(e=>e.trim()),n=t[0],i=t.slice(1);return{...k(n),stacks:i.map(C)}}(e):null,n=t?function(e){return{status:E[e.status],hand:e.hand?p(e.hand):null,handIndex:e.handIndex,possibleMoves:(t=e.possibleMoves,t?t.split(" ").map($):null)};var t}(t):null,i=null,s=null,a=[]})(e,t);const o=e=>{let t=n.possibleMoves.find(t=>t.hash===e);return t?t.to:-1};this.me=()=>!!n,this.meStatus=()=>n.status,this.meHand=()=>n.hand,this.meHandIndex=()=>n.handIndex,this.mePossibleMoves=()=>n.possibleMoves,this.mePossibleMoveHash=e=>n.possibleMoves.includes(t=>t.hash===e),this.meMinRaise=()=>{let e=o("RR");return-1===e?o("AA"):e},this.meMaxRaise=()=>o("AA"),this.meThirdRaise=()=>o("TR"),this.meHalfRaise=()=>o("HR"),this.mePotRaise=()=>o("PR"),this.meAllin=()=>o("AA"),this.meInvolved=()=>this.me()&&"involved"===this.meStatus(),this.meTurn=()=>this.meInvolved()&&this.toAct()===this.meHandIndex(),this.playing=()=>!!l,this.winners=()=>s,this.hands=()=>a,this.middle=()=>[...this.flopCards(),this.turnCard(),this.riverCard()],this.flopCards=()=>i.flop,this.turnCard=()=>i.turn,this.riverCard=()=>i.river,this.blinds=()=>l.blinds,this.round=()=>l.round,this.button=()=>l.button,this.toAct=()=>l.toAct,this.allowRaiseUntil=()=>l.allowRaiseUntil,this.lastFullRaise=()=>l.lastFullRaise,this.handIndexes=()=>l.stacks.map((e,t)=>t),this.stack=e=>l.stacks[e].stack,this.recentWager=e=>l.stacks[e].wager,this.lastAction=e=>(l.stacks[e].lastAction||(this.smallBlind()===e?l.stacks[e].lastAction=j("smallBlind",this.recentWager(e)):this.bigBlind()===e&&(l.stacks[e].lastAction=j("bigBlind",this.recentWager(e)))),l.stacks[e].lastAction),this.smallBlind=()=>(this.button()+1)%l.stacks.length,this.bigBlind=()=>(this.smallBlind()+1)%l.stacks.length;this.allInvolved=()=>l.stacks.filter(e=>(e=>"involved"===e||"oldallin"===e||"newallin"===e)(e.role)).map(e=>e.stackIndex),this.runningPot=()=>l.pots.running,this.sidePots=()=>l.pots.sides,this.allPots=()=>[this.runningPot(),...this.sidePots()],this.allPotsWager=()=>this.allPots().map(e=>e.wager).reduce((e,t)=>e+t,0),this.doMove=e=>{let{toAct:t,newRole:n,newStack:i,newWager:s,uci:a}=e,o=l.toAct,r=l.stacks[l.toAct],u=$(a);return u.to=parseInt(s),r.stack=parseInt(i),r.lastAction=u,r.recentWager=parseInt(s),r.role=function(e){return R[e]}(n),{prevToAct:o}},this.doNextTurn=e=>{let{toAct:t}=e;l.toAct=t},this.doNextRound=e=>{let{toAct:t,pots:n,middle:s}=e;l.toAct=t,l.pots=y(n),i=m(s)},this.doOneWin=e=>{let{winners:t}=e,{pots:n,stacks:i}=t;s=x(n)},this.doShowdown=e=>{let{winners:t,middle:n,hands:l}=e,{pots:o,stacks:r}=t;a=function(e){return e.map(e=>e?{hole:p(e.hole),rank:e.rank,hand:p(e.hand)}:null)}(l),s=x(o),i=m(n)}}function N(e,t,n){var i,l,s;if(0==t)i=l=s=n;else{function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var o=n<.5?n*(1+t):n+t-n*t,r=2*n-o;i=a(r,o,e+1/3),l=a(r,o,e),s=a(r,o,e-1/3)}return[255*i,255*l,255*s]}const z={Blue:4278190335,SwanWhite:4294439395,CrocTooth:4291939520,SummerSky:4281642208,GreyPorc:4286873978,Pumpkin:4294932799,CelGreen:4281588146,FluRed:4294922834,Mandarin:4294947138,LuckyP:4281085012,ChileanFire:4291649843},O=e=>{return[(16711680&e)>>>16,(65280&e)>>>8,255&e,(4278190080&e)>>>24]},D=e=>{const[t,n,i,l]=O(e),[s,a,o]=function(e,t,n){e/=255,t/=255,n/=255;var i,l,s=Math.max(e,t,n),a=Math.min(e,t,n),o=(s+a)/2;if(s==a)i=l=0;else{var r=s-a;switch(l=o>.5?r/(2-s-a):r/(s+a),s){case e:i=(t-n)/r+(t<n?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}i/=6}return[i,l,o]}(t,n,i);return[s,a,o,l]},L=(e,t,n,i)=>{const[l,s,a]=N(e,t,n);return(([e,t,n,i])=>(i<<24>>>0|e<<16>>>0|t<<8>>>0|n)>>>0)([l,s,a,i])},F=(e,t,n,i)=>{const[l,s,a]=N(e,t,n);return(([e,t,n,i])=>(i<<24>>>0|n<<16>>>0|t<<8>>>0|e)>>>0)([l,s,a,i])};function B(e=z.Blue){let[t,n,i,l]=D(e);const s=[t,n,i,l];const a=e=>(...t)=>(e(...t),this);this.reset=a(e=>{t=s[0],n=s[1],i=s[2],l=s[3]}),this.base=a(()=>{s[0]=t,s[1]=n,s[2]=i,s[3]=l}),this.copy=()=>new B(e).hue(t).sat(n).lum(i).alp(l/255).base(),this.hue=a(e=>t=e),this.sat=a(e=>n=e),this.lum=a(e=>i=e),this.alp=a(e=>l=255*e),this.hsl=a(e=>{t=e[0],n=e[1],i=e[2]}),this.hsb=a(e=>{t=e[0]/360,n=e[1]/100,i=e[2]/100}),this.rgba=()=>L(t,n,i,l),this.css=()=>(function(e,t,n,i){return`hsla(${360*e}, ${100*t}%, ${100*n}%, ${i/255})`})(t,n,i,l),this.abgr=()=>F(t,n,i,l)}function W(){this.background=new B(z.CrocTooth).lum(.2).base(),this.background2=new B(z.CrocTooth).lum(.4).base(),this.potBg=new B(z.SummerSky).lum(.2).base(),this.actions={sblind:new B(z.Mandarin).lum(.44).base(),bblind:new B(z.Mandarin).lum(.44).base(),raise:new B(z.Mandarin).lum(.54).base(),check:new B(z.SummerSky).lum(.44).base(),call:new B(z.SummerSky).lum(.44).base(),fold:new B(z.FluRed).lum(.44).base(),allin:new B(z.Pumpkin).lum(.44).base()}}function q(e){let t,n;this.init=()=>{t=e.colors.background.copy(),n=new B(z.CelGreen).lum(.44).alp(.98).base()},this.update=e=>{};const i=()=>({background:n.css()});this.pokerView=()=>[c(".bg-poker",{style:{background:t.css()}})],this.view=()=>[c(".bg-table",{style:{...i()}})]}function _(e,t){t={name:"pool",warnLeak:400,...t};const n=(()=>{let e=0;return()=>e++})();let i=[],l=[];this.name=()=>t.name,this.alives=()=>i.length,this.total=()=>l.length+i.length,this.warnLeak=()=>t.warnLeak,this.toString=()=>`[${this.name()} alives: ${this.alives()} deads: ${l.length}]`,this.acquire=(t=(()=>{}))=>{let s;return this.total()>this.warnLeak()&&(console.warn(`possible pool leak at ${this.name()}.`),this.releaseLast()),t(s=l.length>0?l.pop():e(n())),i.push(s),s},this.acquireLimit=(e,t)=>{for(;this.alives()<t;)this.acquire(e)},this.release=e=>{this.releaseIndex(i.indexOf(e))},this.releaseIndex=e=>{e>-1&&l.push(i.splice(e,1)[0])},this.releaseLast=()=>{this.releaseIndex(0)},this.releaseAll=()=>{l=[...l,...i],i=[]},this.releaseIf=(e,t=(()=>{}))=>{let n=[],s=[];i.forEach(i=>{e(i)?(t(i),n.push(i)):s.push(i)}),i=s,l=[...n,...l]},this.reduce=(e,t)=>i.reduce(e,t),this.map=e=>i.map(e),this.flatMap=e=>i.flatMap(e),this.each=e=>{i.forEach(e)},this.find=e=>i.find(e)}const V=[{klass:"seatone",position:{top:"90%",left:"50%"},deal:{transform:"rotate(0deg)",0:[-680,-40],1:[-180,-55]},action:{0:[62,50],1:[26,50]},button:{0:[50,50]}},{klass:"seattwo",position:{top:"50%",left:"4%"},deal:{transform:"rotate(90deg)",0:[-810,-560],1:[-120,-25]},action:{0:[50,15],1:[26,50]},button:{0:[50,25]}},{klass:"seatthree",position:{top:"8%",left:"30%"},deal:{transform:"rotate(-20deg)",0:[140,406],1:[100,-15]},action:{0:[30,28],1:[26,50]},button:{0:[30,38]}},{klass:"seatfour",position:{top:"8%",left:"70%"},deal:{0:[20,-540],1:[100,-60]},action:{0:[32,63],1:[26,50]},button:{0:[32,63]}},{klass:"seatfive",position:{top:"50%",left:"96%"},deal:{transform:"rotate(-90deg)",0:[-885,560],1:[-200,85]},action:{0:[50,80],1:[26,50]},button:{0:[50,80]}}];function U(e,...t){e&&setTimeout(()=>e(...t),1)}function G(e){return e+"$"}function J(e){let t,n,i,l,s,a,o,r;this.init=u=>{n=u.seatIndex;let c=function(e){return e.clock}(e.data);if(!c)return void(i=!1);i=c.running,l=c.initial,s=1e3*c.times,a=s,o=1e3*l,r=1e3*Math.min(60,Math.max(10,.125*l));let d=e.game();t=d.toAct()===w(e.data,n)};const u=()=>t&&i,d=()=>{let e=1/o;return Math.min(1,a*e)},h=t=>{let n=a;a=Math.max(0,a-t),n>0&&0===a&&U(function(e){return e.events.flag}(e.data))};this.hide=()=>{i=!1},this.update=e=>{(e=>{u()&&h(e)})(e)},this.view=()=>{let e=u()?"":".hidden",t=a<r?"emerg":"";return c("div.timer"+e,[c("svg",{viewBox:"0 0 40 40"},[c("circle.border",{cx:20,cy:20,r:18,fill:"none"}),c("circle.bar."+t,{cx:20,cy:20,r:18,fill:"none",style:{"stroke-dasharray":"113px","stroke-dashoffset":283*d()+"%"}})])])}}function K(e){let t=new _(()=>new Q(e));this.init=n=>{t.releaseAll(),function(e){return e.seats}(e.data).forEach((e,n)=>{t.acquire(t=>t.init({seatIndex:n,seat:e}))})};this.beginClock=e=>{t.each(t=>t.beginClock(e))},this.stopClock=()=>{t.each(e=>e.stopClock())},this.updateStack=e=>{t.find(t=>t.handIndex===e).updateStack()},this.addStack=(e,n)=>{t.find(t=>t.handIndex===e).addStack(n)},this.update=e=>{t.each(t=>t.update(e))},this.view=e=>t.map(t=>t.view(e))}function Q(e){let t,n,i,l,s,a=new J(e,this);this.init=s=>{t=s.seatIndex,n=s.seat,i=V[t],a.init({seatIndex:t}),l=this.handIndex=w(e.data,t),this.updateStack()},this.updateStack=()=>{let t=e.game();-1!==l&&(s=t.stack(l))},this.addStack=e=>{s+=e},this.beginClock=()=>{a.init({seatIndex:t})},this.stopClock=()=>{a.hide()},this.update=e=>{a.update(e)};const o=()=>!n,r=()=>{o()&&U(function(e){return e.events.sit}(e.data),t)},u=e=>{let t=16*e.tRatio;return{...i.position,height:t+"%",width:"16%"}};this.view=e=>{let t=[a.view()];return o()||(t.push(c("img",{src:n.img})),-1!==l&&t.push(c("div.stack",G(s)))),c("div.seat."+(()=>[i.klass,o()?".empty":""].join(" "))(),{onclick:r,style:{...u(e)}},t)}}Math.PI;function Z(e,t){return Math.random()*(t-e)+e}function X(e,t=e){let n=0;const i=()=>{e!==t?(()=>n=0)():(()=>n=1)()};return{update(e){(n+=e)>1&&(n=1)},settled:(e=1)=>n>=e,progress:(e=1)=>n,both(n,l=n){e=n,t=l,i()},target:e=>(e&&(t=e,i()),t),value:l=>(l&&(e=l,i()),(()=>e+(t-e)*n)())}}function Y({name:e="Promise"}){let t,n;this.reject=()=>{n&&n(e+" cancelled"),t=void 0,n=void 0},this.resolve=()=>{t&&t(),t=void 0,n=void 0},this.settled=()=>!t,this.begin=()=>new Promise((e,i)=>{t=e,n=i})}function ee(e,t){return[e[0]-t[0],e[1]-t[1]]}function te(e,t,n){return[e[0]+t[0]*n,e[1]+t[1]*n]}const ne=()=>({height:"8%",width:"3%"});function ie(e){let t=new _(()=>new le(e,t)),n=new se(e);this.init=()=>{let i=e.game();t.releaseAll(),i.playing()?(n.init({seatIndex:b(e.data,i.button())}),i.allInvolved().forEach(e=>{t.acquire(t=>t.init({handIndex:e}))})):n.init({seatIndex:0})},this.beginDeal=()=>t.reduce((e,t)=>(t.preBeginDeal(),e.then(()=>t.beginDeal())),Promise.resolve()),this.update=e=>{t.each(t=>t.update(e))},this.view=()=>[n.view(),c("div.hand.dealer",{style:{...ne()}},[c("div.card.back"),c("div.card.back"),c("div.card.back")]),...t.map(e=>e.view())]}function le(e,t){const n=new Y({name:"Deal Animation"}),i=new X(0),l=new X(0);let s,a,o,r,u,d=!1;this.init=t=>{u=t.handIndex,r=b(e.data,u),o=V[r],s=Z(-20,20),a=Z(-20,20),i.both(1),l.both(1),d=!1,n.reject()};const h=n=>{e.game().allInvolved().includes(u)||t.release(this)};this.update=e=>{h(),(e=>{i.update(.01*e*.8),l.update(.01*e*.8),d&&i.progress()>.3&&(d=!1,l.target(1)),!n.settled()&&i.settled(.8)&&l.settled(.8)&&n.resolve()})(e)},this.preBeginDeal=()=>{i.both(0),l.both(0)},this.beginDeal=()=>(d=!0,i.both(0,1),l.both(0),n.begin());const f=()=>({...o.position,...ne()});this.view=()=>{let e=o.klass,t=i.value(),n=l.value(),r=s*i.value(),u=a*l.value(),d=o.deal[0],h=ee(o.deal[1],o.deal[0]),v=te(d,h,i.value()),p=te(d,h,l.value());return c("div.hand."+e,{style:{...f(),transform:o.deal.transform}},[c("div.card.back",{style:{opacity:`${t}`,transform:`rotate(${r}deg)`,top:`${v[0]}%`,left:`${v[1]}%`}}),c("div.card.back",{style:{opacity:`${n}`,transform:`rotate(${u}deg)`,top:`${p[0]}%`,left:`${p[1]}%`}})])}}function se(e){let t,n;this.init=e=>{t=e.seatIndex,n=V[t]},this.update=e=>{};const i=()=>({top:`${n.button[0][0]}%`,left:`${n.button[0][1]}%`});this.view=()=>{let e=n.klass;return c("div.button."+e,{style:{...i()}},"B")}}const ae={bigBlind:{klass:"bblind",colors:"bblind",header:"B"},smallBlind:{klass:"sblind",colors:"sblind",header:"S"},raise:{klass:"raise",colors:"raise",header:"R"},call:{klass:"call",colors:"call",header:"C"},fold:{klass:"fold",colors:"fold",hideAmount:!0,header:"F"},check:{klass:"check",colors:"check",hideAmount:!0,header:"H"},allin:{klass:"allin",colors:"allin",header:"A"},allincall:{klass:"allincall",colors:"call",header:"A"},allinhalf:{klass:"allinhalf",colors:"raise",header:"A"},allinfull:{klass:"allinfull",colors:"raise",header:"A"}};function oe(e){let t=new _(()=>new re(e,t));this.init=()=>{let n=e.game();t.releaseAll(),n.playing()&&n.handIndexes().forEach(e=>{let i=n.lastAction(e);i&&t.acquire(t=>t.init({handIndex:e,type:ae[i.action],amount:i.to}))})},this.beginMove=()=>{let n=e.game(),i=n.toAct(),l=n.lastAction(i),s=t.find(e=>e.handIndex()===i),a={handIndex:i,type:ae[l.action],amount:l.to};return s?s.init(a):s=t.acquire(e=>e.init(a)),Promise.resolve()},this.beginCollect=()=>{let e=[];return t.each(t=>e.push(t.beginCollect())),Promise.all(e)},this.update=e=>{t.each(t=>t.update(e))},this.view=()=>t.map(e=>e.view())}function re(e,t){let n,i,l,s,a,o;const r=new Y({name:"Collect Animation"}),u=new X(0);this.init=t=>{s=t.amount,a=t.type,l=t.handIndex,i=b(e.data,l),n=V[i],o=e.colors.actions[a.colors].copy(),u.both(0),r.reject()},this.handIndex=()=>l,this.update=e=>{u.update(.01*e*.2),!r.settled()&&u.settled(.8)&&(t.release(this),r.resolve())},this.beginCollect=()=>(u.target(1),r.begin());const d=()=>({...n.position}),h=()=>({color:"white",background:o.css()});this.view=()=>{let e=n.klass;e+="."+a.klass;let t=te(n.action[0],ee(n.action[1],n.action[0]),u.value()),i=1-.6*u.value(),l=a.hideAmount;return c("div.action."+e,{style:{...d(),top:`${t[0]}%`,left:`${t[1]}%`,opacity:i}},[c("div.header",{style:{...h()}},a.header),l?"":c("div.amount",G(s))])}}function ue(e){let t,n,i=new _(()=>new ce(e,i));this.init=()=>{n=e.colors.potBg.copy();let l=e.game();i.releaseAll(),t=l.playing()?l.allPotsWager():0},this.beginCollect=()=>(t=e.game().allPotsWager(),Promise.resolve()),this.beginDistribute=n=>()=>{i.releaseAll(),e.game().winners().reduce((l,s)=>{let{wager:a,involved:o}=s,r=a/o.length,u=o.map(t=>i.acquire(n=>n.init({handIndex:t,seatIndex:b(e.data,t),amount:r})));return l.then(()=>(t-=r,Promise.all([...u.map(e=>e.beginDistribute()),n?e.beginRankMessage(o):null,n?e.beginHighlightCards(o):null])))},Promise.resolve())},this.update=e=>{i.each(t=>t.update(e))};this.view=()=>{let e;return t>0&&(e=c("div.pot",{style:{top:"26%",left:"50%"}},[c("div.header",{style:{color:"white",background:n.css()}},"P"),c("div.amount",t)])),[...i.map(e=>e.view()),e]}}function ce(e,t){let n,i,l,s,a;const o=new Y({name:"Pot Distribute Animation"}),r=new X(0);this.init=t=>{n=e.colors.potBg.copy(),i=t.amount,l=t.seatIndex,s=t.handIndex,a=V[l],r.both(0),o.reject()},this.beginDistribute=()=>(r.target(1),o.begin()),this.update=n=>{r.update(.01*n*.1),!o.settled()&&r.settled(.8)&&(e.addStack(s,i),t.release(this),o.resolve())};this.view=()=>{let e=te(a.action[1],ee(a.action[0],a.action[1]),r.value());return c("div.pot",{style:{top:`${e[0]}%`,left:`${e[1]}%`}},[c("div.header",{style:{color:"white",background:n.css()}},"P"),c("div.amount",i)])}}const de=()=>({klass:"flop1",position:{top:"50%",left:"20%"}}),he=()=>({klass:"flop2",position:{top:"50%",left:"31%"}}),fe=()=>({klass:"flop3",position:{top:"50%",left:"42%"}}),ve=()=>({klass:"turn",position:{top:"50%",left:"53%"}}),pe=()=>({klass:"river",position:{top:"50%",left:"64%"}});function me(e){e={autoStart:!0,delay:2e3,...e};let t,{autoStart:n,delay:i}=e,l=n,s=0;this.running=()=>l,this.value=(e=1)=>s*e,this.start=()=>{l=!0},this.stop=()=>{s=0,l=!1},this.reset=()=>{s=0},this.beginDelay=(e=(()=>{}))=>{t=e,this.reset(),this.start()},this.update=e=>{if(l){(s+=e)>=i&&t&&(t(),t=void 0,this.stop())}}}function ge(e){let t=[new be(this,de()),new be(this,he()),new be(this,fe())],n=new be(this,ve()),i=new be(this,pe());const l=[...t,n,i];this.init=()=>{t.forEach(e=>e.init({})),n.init({}),i.init({})},this.update=e=>{t.forEach(t=>t.update(e)),n.update(e),i.update(e)},this.beginReveal=()=>{const l=e.game();let s=l.flopCards(),a=l.turnCard(),o=l.riverCard(),r=Promise.resolve();return s&&(r=r.then(()=>Promise.all(t.map((e,t)=>e.beginReveal(s[t]))))),a&&(r=r.then(()=>n.beginReveal(a))),o&&(r=r.then(()=>i.beginReveal(o))),r},this.beginHighlight=e=>(e.forEach(e=>l.filter(t=>t.cardEqual(e)).forEach(e=>e.beginHighlight())),Promise.resolve()),this.view=e=>[...t.map(t=>t.view(e)),n.view(e),i.view(e)]}function be(e,t){let n,i,l,s,a,o=new me({autoStart:!1,delay:t.delay||1e3});const r=new Y({name:"Reveal Animation"}),u=new Y({name:"Highlight Animation"});this.init=()=>{n=!1,i=!1,a=void 0,l=void 0,s=void 0,o.stop(),r.reject(),u.reject()},this.update=e=>{o.update(e)},this.beginReveal=e=>n?Promise.resolve():(a=e.hash,l=e.rank,s=e.suit,o.beginDelay(()=>{n=!0,r.resolve()}),r.begin()),this.beginHighlight=()=>(i=!0,o.beginDelay(()=>{i=!1,u.resolve()}),u.begin()),this.cardEqual=e=>a===e.hash;const d=({tRatio:e,cardRatio:n})=>{let i=14*n,l=14*e;return{...t.position,height:l+"%",width:i+"%"}};this.view=e=>{let a=i?"glow":"";return n&&(a+="."+[l,s].join(".")),c("div.middle.card."+t.klass+"."+a,{style:{...d(e)}})}}function we(e){let t=new _(()=>new ke(e,t));this.init=()=>{t.releaseAll();let n=e.game();if(n.me()){let i=n.meHand();if(i){let n=0;t.acquire(t=>t.init({handIndex:n,seatIndex:b(e.data,n),hole:i,me:!0}))}}},this.update=e=>{t.each(t=>t.update(e))},this.beginReveal=()=>{const n=e.game();let i=n.hands();return n.handIndexes().forEach(l=>{if(0===l&&n.me()&&n.meHand())return;let s=i[l];s&&t.acquire(t=>t.init({handIndex:l,seatIndex:b(e.data,l),...s}))}),Promise.resolve()},this.beginHighlight=(e,n)=>{return t.find(t=>t.handIndex===e).beginHighlight(n)},this.view=e=>[...t.flatMap(t=>t.view(e))]}function ke(e,t){let n,i,l,s,a,o,r,u=new me({autoStart:!1,delay:1e3});const d=new Y({name:"Reveal Animation"});this.init=e=>{n=e.me,i=e.hole,s=e.handIndex,l=e.seatIndex,r=V[l],this.handIndex=s,a=!1,o=!1,d.reject()},this.update=e=>{u.update(e)};const h=({tRatio:e,cardRatio:t})=>{let n=12*t,i=12*e;return{...r.position,width:n+"%",height:i+"%"}},f=e=>[e.rank,e.suit].join(".");this.beginHighlight=e=>(e.forEach(e=>{v(e,i[0])?a=!0:v(e,i[1])&&(o=!0)}),u.beginDelay(()=>{a=!1,o=!1,d.resolve()}),d.begin()),this.view=e=>{let t=f(i[0]),l=f(i[1]),s=r.klass;return n&&(s+=".me"),a&&(t+=".glow"),o&&(l+=".glow"),[c("div.hole.card.first."+s+"."+t,{style:{...h(e)}}),c("div.hole.card.second."+s+"."+l,{style:{...h(e)}})]}}function ye(e){let t,n=new me({autoStart:!1,delay:2e3});const i=new Y({name:"Rank Message Animation"});this.init=()=>{t=void 0,n.stop(),i.reject()},this.update=e=>{n.update(e)},this.beginShow=e=>(t=e,n.beginDelay(()=>{i.resolve()}),i.begin());this.view=()=>{return[c("div.rankmessage"+(t?"":".hidden"),{style:{top:"36%",left:"50%"}},t)]}}function xe(e){this.init=()=>{},this.update=e=>{};const t=()=>{let t=e.game();return t.me()?t.meStatus():null};this.view=()=>{return[c("div.mestatus",{style:{bottom:"5%",left:"50%"}},t())]}}function Ae(e){this.init=()=>{},this.update=e=>{},this.view=()=>[c("div.meoff")]}const Ie={klass:"call",text:"call",colors:"call",possibleMoves:["CA"]},Ce={klass:"check",text:"check",colors:"check",possibleMoves:["CH"]},Se={klass:"fold",text:"fold",colors:"fold",possibleMoves:["FO"]},Re={klass:"raise",text:"raise",colors:"raise",possibleMoves:["AA","RR"]},Me={klass:"traise",text:"thirdPot",colors:"raise",possibleMoves:["TR"]},Pe={klass:"hraise",text:"halfpot",colors:"raise",possibleMoves:["HR"]},$e={klass:"praise",text:"fullpot",colors:"raise",possibleMoves:["PR"]},He={klass:"allin",text:"allin",colors:"raise",possibleMoves:["AA"]};function je(e){const t=new Ne(e,Ie,()=>{U(g(e.data),"CA")}),n=new Ne(e,Ce,()=>{U(g(e.data),"CH")}),i=new Ne(e,Se,()=>{U(g(e.data),"FO")}),l=new Ne(e,Re,()=>{let t=s.amount();t===e.game().meMaxRaise()?U(g(e.data),"AA"):U(g(e.data),"RR"+t)}),s=new Ee(e,this);this.init=()=>{t.init({}),n.init({}),i.init({}),l.init({}),s.init({})},this.update=e=>{},this.view=()=>[s.view(),c("div.meon",{},[i.view(),n.view(),t.view(),l.view()])]}function Ee(e,t){let n,i,l,s;const a=e.colors.background2.copy();let o=new Te(e,Me,()=>{s=e.game().meThirdRaise()}),r=new Te(e,Pe,()=>{s=e.game().meHalfRaise()}),u=new Te(e,$e,()=>{s=e.game().mePotRaise()}),d=new Te(e,He,()=>{s=e.game().meAllin()});this.init=()=>{let t=e.game();i=t.meMinRaise(),l=t.meMaxRaise(),s=i,n=Re.possibleMoves.includes(e=>t.mePossibleMoveHash(e))},this.amount=()=>s,this.update=e=>{},this.view=()=>{return c("div.meraise"+(n?".hidden":""),{style:{background:a.css()}},[c("div.label",{style:{background:e.colors.background.css()}},s),c("input.slider",{oninput:e=>{s=e.target.value},type:"range",value:s,min:i,max:l}),c("div.presets",[o.view(),r.view(),u.view(),d.view()])])}}function Te(e,t,n){const i=e.colors.background2.copy();let l;this.init=n=>{let i=e.game();l=t.possibleMoves.includes(e=>i.mePossibleMoveHash(e))},this.update=e=>{},this.view=()=>{let e=t.klass,s=t.text;return l&&(e+=".hidden"),c("button.mebutton."+e,{onclick:n,style:{background:i.css()}},s)}}function Ne(e,t,n){let i;this.init=n=>{let l=e.game();i=t.possibleMoves.includes(e=>l.mePossibleMoveHash(e))},this.update=e=>{},this.view=()=>{let l=t.klass,s=t.text,a=e.colors.actions[t.colors].copy();return i&&(l+=".hidden"),c("button.mebutton."+l,{onclick:n,style:{background:a.css()}},s)}}function ze(e){let t=new Ae(e,this),n=new je(e,this);this.init=()=>{s()?n.init():a()&&t.init()},this.update=e=>{n.update(e),t.update(e)};const i=()=>e.game().meInvolved(),l=()=>e.game().meTurn(),s=()=>i()&&l(),a=()=>i()&&!l();this.view=()=>{let e=[];return s()?e.push(...n.view()):a()&&e.push(...t.view()),[c("div.mecontrols",{style:{width:"36%",height:"10%",bottom:"2%",right:"1.2%"}},e)]}}function Oe(e){this.colors=new W(this);let t,n=new q(this),i=new K(this),l=new ie(this),s=new oe(this),a=new ue(this),o=new ge(this),r=new we(this),u=new ye(this),d=new xe(this),h=new ze(this);this.init=e=>{this.data=e,t=new T(function(e){return e.fen}(e),function(e){return e.me}(e)),n.init(),i.init(),l.init(),s.init(),a.init(),o.init(),r.init(),u.init(),d.init(),h.init()},this.game=()=>t,this.beginJoin=()=>{i.init()},this.beginLeave=()=>{i.init()},this.beginDeal=e=>(this.init(e),l.beginDeal()),this.beginMove=e=>{let{prevToAct:n}=t.doMove(e);return i.updateStack(n),s.beginMove()},this.updateStack=e=>{i.updateStack(e)},this.addStack=(e,t)=>{i.addStack(e,t)},this.beginNextTurn=e=>(t.doNextTurn(e),Promise.resolve()),this.beginNextRound=e=>(t.doNextRound(e),s.beginCollect().then(a.beginCollect).then(o.beginReveal)),this.beginOneWin=e=>(t.doOneWin(e),s.beginCollect().then(a.beginCollect).then(a.beginDistribute(!1))),this.beginShowdown=e=>(t.doShowdown(e),s.beginCollect().then(a.beginCollect).then(r.beginReveal).then(o.beginReveal).then(a.beginDistribute(!0))),this.beginRankMessage=e=>{let n=t.hands(),{rank:i}=n[e[0]];return u.beginShow(i)},this.beginHighlightCards=e=>{t.middle();let n=t.hands();return Promise.all(e.map(e=>{let{hole:t,hand:i}=n[e];return Promise.all([o.beginHighlight(i),r.beginHighlight(e,i)])}))},this.beginClock=e=>{i.beginClock(e)},this.stopClock=()=>{i.stopClock()},this.update=e=>{n.update(e),i.update(e),l.update(e),s.update(e),a.update(e),o.update(e),r.update(e),u.update(e),d.update(e),h.update(e)};this.view=e=>{let t={tRatio:.8*e.width/(.7*e.height),cardRatio:63/88};return c("div.pokerf",[...n.pokerView(),c("div.table",{style:{top:"10%",left:"10%",width:"80%",height:"70%"}},[...n.view(),...i.view(t),...l.view(),...o.view(t),...r.view(t),...u.view(),...s.view(),...a.view()]),...d.view(),...h.view()])}}function De(e,t){!function e(t,n){for(var i in n)Le(t[i])&&Le(n[i])?e(t[i],n[i]):t[i]=n[i]}(e,t)}function Le(e){return"object"==typeof e}function Fe(e,t){this.play=e=>t=e,this.api=()=>({set(n){De(e,n),t.init(e)},setClock:n=>(function(e,t){e.clock=t}(e,n),t.beginClock(n)),deal:n=>(function(e,t){e.seatIndexes=t.seatIndexes,e.fen=t.fen,e.me=t.me,e.me&&(e.me.handIndex=this.handIndex(e,0))}(e,n),t.beginDeal(e,n)),move:e=>t.beginMove(e),nextTurn:e=>t.beginNextTurn(e),nextRound:e=>t.beginNextRound(e),oneWin:e=>(t.stopClock(),t.beginOneWin(e)),showdown:e=>(t.stopClock(),t.beginShowdown(e)),leave:n=>(function(e,t){e.seats[t.seatIndex]=null}(e,n),t.beginLeave()),join:n=>(function(e,t){e.seats[t.seatIndex]=t.seat}(e,n),t.beginJoin()),mejoin(n){!function(e,t){e.seats=t.seats,e.seatIndexes=t.seatIndexes,e.fen=t.fen,e.clock=t.clock,e.me=t.me,e.me&&(e.me.handIndex=this.handIndex(e,0))}(e,n),t.init(e)}})}function Be(e,t,n){n||(n=e=>new a(e,60).start());let i={events:{}};De(i,t);let l=new u(e),s=new Oe,o=new Fe(i,s);return s.init(i),n(e=>{s.update(e),l.render(s.view(l.bounds()))}),o.api()}n.d(t,"app",function(){return Be})}])});